import{_ as a,o as l,c as u,a as n,n as o,t as _,g as f,s as b,r as p,b as m,w as g,v as k,F as x}from"./index-2fb12167.js";const y={name:"Lives",props:{lives:Number}},I={class:"hearts"};function L(t,e,r,h,s,i){return l(),u("div",I,[n("span",{class:o([{broken:r.lives<=0},"heart"])},null,2),n("span",{class:o([{broken:r.lives<=1},"heart"])},null,2),n("span",{class:o([{broken:r.lives<=2},"heart"])},null,2)])}const S=a(y,[["render",L]]);const $={name:"Score",props:{score:Number}},N={class:"score"};function w(t,e,r,h,s,i){return l(),u("div",N,[n("span",null,"Score "+_(r.score),1)])}const V=a($,[["render",w]]);const T={name:"App",components:{Lives:S,Score:V},props:{mode:String,voice:String},data(){return{speech:void 0,lives:3,score:0,error:!1,maxNumber:void 0,number:void 0,numbers:[],guess:void 0,intervalId:void 0,timeLeft:0,focusInput:!1}},mounted(){this.maxNumber=(()=>{switch(this.mode){case"easy":return 99;case"medium":return 999;case"hard":return 9999;default:return 99}})(),this.speech=new SpeechSynthesisUtterance,this.speech.volume=100,this.speech.rate=1,this.speech.pitch=1,this.speech.voice=f(this.voice),this.speech.lang=this.speech.voice.lang,this.speech.onend=t=>{clearInterval(this.intervalId),this.focusInput&&this.$nextTick(()=>b(this.$refs.input)),setTimeout(()=>window.scrollTo(0,0),200),this.intervalId=setInterval(this.tick,1e3)}},methods:{tick(){--this.timeLeft>0||(clearInterval(this.intervalId),this.guess=this.number,this.error=!0,--this.lives==0&&setTimeout(()=>this.$router.push(`/gameover/${this.score}`),3e3))},start(t){this.guess="",this.error=!1,this.focusInput=t,this.timeLeft=5,this.speech.text=this.number=this.getNumber(),console.log(this.number),speechSynthesis.speak(this.speech)},check(){this.guess==this.number&&(clearInterval(this.intervalId),this.score++,this.start(!1))},back(){clearInterval(this.intervalId),this.$router.push(this.score>0?`/gameover/${this.score}`:"/")},getNumber(){return this.numbers.length==0&&(this.numbers=[...Array(this.maxNumber+1).keys()].map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(({value:t})=>t)),this.numbers.pop()}}},C={class:"topbar"},M=["disabled"],B=["disabled"],F=["value"];function A(t,e,r,h,s,i){const d=p("Lives"),v=p("Score");return l(),u(x,null,[n("span",C,[m(d,{lives:s.lives},null,8,["lives"]),m(v,{score:s.score},null,8,["score"]),n("span",{class:"back",onClick:e[0]||(e[0]=c=>i.back())})]),n("button",{class:"button circle play",disabled:s.timeLeft>0||s.lives==0,onClick:e[1]||(e[1]=c=>i.start(!0))},null,8,M),g(n("input",{class:o(["number-input",{error:s.error}]),ref:"input",disabled:s.timeLeft<=0,type:"text",inputmode:"numeric",pattern:"[0-9]*","onUpdate:modelValue":e[2]||(e[2]=c=>s.guess=c),onKeyup:e[3]||(e[3]=c=>i.check())},null,42,B),[[k,s.guess]]),n("progress",{class:o(["progress",{hidden:s.timeLeft==0}]),value:s.timeLeft,max:"5"},null,10,F)],64)}const U=a(T,[["render",A]]);export{U as default};
