import{_ as a,o as l,c as u,a as r,n as o,t as f,g as b,s as g,b as p,r as m,d,w as k,v as x,F as y}from"./index-c8cb2714.js";const I={name:"Lives",props:{lives:Number}},S={class:"hearts"};function L(t,e,n,h,s,i){return l(),u("div",S,[r("span",{class:o([{broken:n.lives<=0},"heart"])},null,2),r("span",{class:o([{broken:n.lives<=1},"heart"])},null,2),r("span",{class:o([{broken:n.lives<=2},"heart"])},null,2)])}const $=a(I,[["render",L]]);const N={name:"Score",props:{score:Number}},w={class:"score"};function V(t,e,n,h,s,i){return l(),u("div",w,[r("span",null,"Score "+f(n.score),1)])}const T=a(N,[["render",V]]);const C={name:"App",components:{Lives:$,Score:T},props:{mode:String,voice:String},data(){return{speech:void 0,lives:3,score:0,error:!1,maxNumber:void 0,number:void 0,numbers:[],guess:void 0,intervalId:void 0,timeLeft:0,focusInput:!1}},mounted(){this.maxNumber=(()=>{switch(this.mode){case"easy":return 99;case"medium":return 999;case"hard":return 9999;default:return 99}})(),this.speech=new SpeechSynthesisUtterance,this.speech.volume=100,this.speech.rate=1,this.speech.pitch=1,this.speech.voice=b(this.voice),this.speech.lang=this.speech.voice.lang,this.speech.onend=t=>{clearInterval(this.intervalId),this.focusInput&&this.$nextTick(()=>g(this.$refs.input)),setTimeout(()=>window.scrollTo(0,0),200),this.intervalId=setInterval(this.tick,1e3)}},methods:{tick(){--this.timeLeft>0||(clearInterval(this.intervalId),this.guess=this.number,this.error=!0,--this.lives==0&&setTimeout(()=>{p(this.mode,this.voice,this.score),this.$router.push(`/gameover/${this.score}`)},3e3))},start(t){this.guess="",this.error=!1,this.focusInput=t,this.timeLeft=5,this.speech.text=this.number=this.getNumber(),console.log(this.number),speechSynthesis.speak(this.speech)},check(){this.guess==this.number&&(clearInterval(this.intervalId),this.score++,this.start(!1))},back(){clearInterval(this.intervalId),p(this.mode,this.voice,this.score),this.$router.push(this.score>0?`/gameover/${this.score}`:"/")},getNumber(){return this.numbers.length==0&&(this.numbers=[...Array(this.maxNumber+1).keys()].map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(({value:t})=>t)),this.numbers.pop()}}},M={class:"topbar"},B=["disabled"],F=["disabled"],A=["value"];function D(t,e,n,h,s,i){const v=m("Lives"),_=m("Score");return l(),u(y,null,[r("span",M,[d(v,{lives:s.lives},null,8,["lives"]),d(_,{score:s.score},null,8,["score"]),r("span",{class:"back",onClick:e[0]||(e[0]=c=>i.back())})]),r("button",{class:"button circle play",disabled:s.timeLeft>0||s.lives==0,onClick:e[1]||(e[1]=c=>i.start(!0))},null,8,B),k(r("input",{class:o(["number-input",{error:s.error}]),ref:"input",disabled:s.timeLeft<=0,type:"text",inputmode:"numeric",pattern:"[0-9]*","onUpdate:modelValue":e[2]||(e[2]=c=>s.guess=c),onKeyup:e[3]||(e[3]=c=>i.check())},null,42,F),[[x,s.guess]]),r("progress",{class:o(["progress",{hidden:s.timeLeft==0}]),value:s.timeLeft,max:"5"},null,10,A)],64)}const z=a(C,[["render",D]]);export{z as default};
